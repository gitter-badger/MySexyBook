{{= it.dots._header(it) }}
<main id="page">
	<div class="container">
		<h1>Recherche{{? it.search_term }} : {{= it.search_term }}{{?}}</h1>

		<form action="{{= it.app.url }}/recherche">
			<fieldset>
				<legend>Rechercher un utilisateur</legend>
				
				<div>
					<label for="search-user-pseudo">Pseudo</label>
					<input type="search" name="user[pseudo]" id="search-user-pseudo" size="12" value="{{= it.search_filters.pseudo ? it.search_filters.pseudo['$regex'] : '' }}" />
				</div>
				
				<div>
					<label for="user-sex">Sexe</label>
					<label>
						<input type="radio" name="user[sex]" id="search-user-sex-male" value="male" {{= (it.search_filters.sex && it.search_filters.sex === 'male') ? ' checked="checked"' : '' }} />
						<span class="radio-label">Homme</span>
					</label>
					<label>
						<input type="radio" name="user[sex]" id="search-user-sex-female" value="female" {{= (it.search_filters.sex && it.search_filters.sex === 'female') ? ' checked="checked"' : '' }} />
						<span class="radio-label">Femme</span>
					</label>
					<label>
						<input type="radio" name="user[sex]" id="search-user-sex-any" value="any" {{= (!it.search_filters.sex || it.search_filters.sex === 'any') ? ' checked="checked"' : '' }} />
						<span class="radio-label">Peu importe</span>
					</label>
				</div>
				
				<div>
					<label for="search-user-geo_county">Département</label>
					<select name="user[geo_county]" id="search-user-geo_county" size="1">
						<option value="">— Limiter la recherche à un département</option>
						{{~ it.geo_counties : county }}
						<option value="{{= county._id }}" {{= (it.search_filters.geo_county_id && it.search_filters.geo_county_id === county._id) ? ' selected="selected"' : '' }}>{{= it.sanitize(county._id + ' – ' +county.name) }}</option>
						{{~}}
					</select>
				</div>
				
				<div>
					<label for="user-camera_side">Côté de la caméra</label>
					<label>
						<input type="radio" name="user[camera_side]" id="search-user-camera_side-photographer" value="photographer" {{= (it.search_filters.camera_side && it.search_filters.camera_side === 'photographer') ? ' checked="checked"' : '' }} />
						<span class="radio-label">Photographe</span>
					</label>
					<label>
						<input type="radio" name="user[camera_side]" id="search-user-camera_side-model" value="model" {{= (it.search_filters.camera_side && it.search_filters.camera_side === 'model') ? ' checked="checked"' : '' }} />
						<span class="radio-label">Modèle</span>
					</label>
					<label>
						<input type="radio" name="user[camera_side]" id="search-user-camera_side-any" value="any" {{= (!it.search_filters.camera_side || it.search_filters.camera_side === 'any') ? ' checked="checked"' : '' }} />
						<span class="radio-label">Peu Importe</span>
					</label>
				</div>
			</fieldset>

			<div>
				<button type="submit">Recherche</button>
			</div>
		</form>

		{{? it.search_results && it.search_results.length }}
		<h2>{{= it.search_results.length }} {{? it.search_results.length > 1 }}utilisateurs trouvés{{??}}utilisateur trouvé{{?}}</h2>
		<ul class="users-list" id="last-registered-users">
			{{~ it.search_results :user }}
			<li class="user">
				<a href="{{= it.app.url }}/book/{{= user.pseudo }}">
					<picture class="user-avatar">
						<source srcset="{{= it.app.url }}/avatar/74x74x1/{{= user._id }}" media="(max-width: 32em)" />
						<source srcset="{{= it.app.url }}/avatar/99x99x1/{{= user._id }}" media="(max-width: 40em)" />
						<source srcset="{{= it.app.url }}/avatar/102x102x1/{{= user._id }}" media="(max-width: 50em)" />
						<source srcset="{{= it.app.url }}/avatar/134x134x1/{{= user._id }}" media="(max-width: 60em)" />
						<source srcset="{{= it.app.url }}/avatar/166x166x1/{{= user._id }}" media="(max-width: 80em)" />
						<img srcset="{{= it.app.url }}/avatar/230x230x1/{{= user._id }}" alt="" />
					</picture>
					<span class="user-pseudo">{{= user.pseudo }}</span>
				</a>
			</li>
			{{~}}
		</ul>
		{{??}}
		<h2>Aucun résultat</h2>
		<p>Votre recherche ne correspond à aucun profil présent dans notre base de données. Essayez de modifier vos critères&nbsp;: vous aurez sans doute plus de chance.</p>
		{{?}}
	</div>
</main>
{{= it.dots._footer(it) }}